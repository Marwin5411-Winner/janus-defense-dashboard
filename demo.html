<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Janus Defense Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
</head>
<body class="bg-gray-900 text-white">
    <!-- Header -->
    <header class="bg-gray-800 border-b border-gray-700">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex items-center">
                    <h1 class="text-xl font-bold text-blue-400">üõ°Ô∏è JANUS DEFENSE</h1>
                </div>
                <div class="flex items-center space-x-4">
                    <div class="text-sm text-gray-400">
                        Last Update: <span id="lastUpdate">09:45 ICT</span>
                    </div>
                    <div class="flex items-center space-x-2">
                        <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                        <span class="text-xs">Connected</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto py-6 sm:px-6 lg:px-8">
        <div class="px-4 py-6 sm:px-0">
            <!-- Stats Cards -->
            <div class="grid grid-cols-1 gap-6 sm:grid-cols-3">
                <div class="bg-blue-900 border border-blue-700 overflow-hidden shadow rounded-lg">
                    <div class="p-5">
                        <div class="flex items-center">
                            <div class="flex-shrink-0">
                                <div class="text-2xl">üö¢</div>
                            </div>
                            <div class="ml-5 w-0 flex-1">
                                <dl>
                                    <dt class="text-sm font-medium text-blue-300 truncate">
                                        Active Vessels
                                    </dt>
                                    <dd class="text-lg font-medium text-white" id="vesselCount">
                                        4
                                    </dd>
                                </dl>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="bg-red-900 border border-red-700 overflow-hidden shadow rounded-lg">
                    <div class="p-5">
                        <div class="flex items-center">
                            <div class="flex-shrink-0">
                                <div class="text-2xl">‚ö†Ô∏è</div>
                            </div>
                            <div class="ml-5 w-0 flex-1">
                                <dl>
                                    <dt class="text-sm font-medium text-red-300 truncate">
                                        Military Vessels
                                    </dt>
                                    <dd class="text-lg font-medium text-white" id="militaryCount">
                                        2
                                    </dd>
                                </dl>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="bg-yellow-900 border border-yellow-700 overflow-hidden shadow rounded-lg">
                    <div class="p-5">
                        <div class="flex items-center">
                            <div class="flex-shrink-0">
                                <div class="text-2xl">üéØ</div>
                            </div>
                            <div class="ml-5 w-0 flex-1">
                                <dl>
                                    <dt class="text-sm font-medium text-yellow-300 truncate">
                                        Active Alerts
                                    </dt>
                                    <dd class="text-lg font-medium text-white" id="alertCount">
                                        1
                                    </dd>
                                </dl>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Map Section -->
            <div class="mt-8">
                <div class="bg-gray-800 border border-gray-700 overflow-hidden shadow rounded-lg">
                    <div class="p-6">
                        <h2 class="text-lg font-medium text-white mb-4">Real-time Vessel Tracking</h2>
                        <div id="map" class="h-96 w-full rounded-lg"></div>
                        
                        <!-- Controls -->
                        <div class="mt-4 flex items-center justify-between">
                            <div class="flex items-center space-x-4">
                                <button onclick="refreshData()" 
                                        class="px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded text-white text-sm">
                                    üîÑ Refresh
                                </button>
                                <button onclick="toggleAutoRefresh()" 
                                        id="autoRefreshBtn"
                                        class="px-4 py-2 bg-green-600 hover:bg-green-700 rounded text-white text-sm">
                                    Auto: ON
                                </button>
                            </div>
                            
                            <!-- Legend -->
                            <div class="flex items-center space-x-4 text-sm">
                                <div class="flex items-center space-x-2">
                                    <div class="w-3 h-3 bg-red-500 rounded-full"></div>
                                    <span class="text-gray-300">Military</span>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <div class="w-3 h-3 bg-green-500 rounded-full"></div>
                                    <span class="text-gray-300">Commercial</span>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <div class="w-3 h-3 bg-yellow-500 rounded-full"></div>
                                    <span class="text-gray-300">Unknown</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Recent Activity -->
            <div class="mt-8">
                <div class="bg-gray-800 border border-gray-700 overflow-hidden shadow rounded-lg">
                    <div class="p-6">
                        <h2 class="text-lg font-medium text-white mb-4">Recent Activity (Click to Locate)</h2>
                        <div id="activityList" class="space-y-4">
                            <div onclick="focusVessel(13.75, 100.58)" class="bg-gray-700 p-3 rounded border-l-4 border-red-500 cursor-pointer hover:bg-gray-600 transition-colors">
                                <div class="flex items-center">
                                    <span class="text-red-500 mr-2">üö®</span>
                                    <div>
                                        <p class="font-semibold text-white">Military vessel detected in monitored zone</p>
                                        <p class="text-sm text-gray-400">HTMS Chakri Naruebet - 09:30 ICT</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div onclick="focusVessel(13.72, 100.55)" class="bg-gray-700 p-3 rounded border-l-4 border-green-500 cursor-pointer hover:bg-gray-600 transition-colors">
                                <div class="flex items-center">
                                    <span class="text-green-500 mr-2">üö¢</span>
                                    <div>
                                        <p class="font-semibold text-white">Commercial vessel entering zone</p>
                                        <p class="text-sm text-gray-400">MV Bangkok Express - 09:25 ICT</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script>
        let map;
        let vesselMarkers = [];
        let autoRefresh = true;
        let refreshInterval;

        function focusVessel(lat, lon) {
            if (map) {
                map.flyTo([lat, lon], 14, {
                    duration: 1.5
                });
            }
        }

        // Mock vessel data
        const vessels = [
            {
                id: '1',
                name: 'HTMS Chakri Naruebet',
                lat: 13.75,
                lon: 100.58,
                speed: 12.5,
                course: 135,
                type: 'Military',
                mmsi: 567000123
            },
            {
                id: '2',
                name: 'MV Bangkok Express',
                lat: 13.72,
                lon: 100.55,
                speed: 8.2,
                course: 90,
                type: 'Commercial',
                mmsi: 529000456
            },
            {
                id: '3',
                name: 'Unknown Vessel',
                lat: 13.78,
                lon: 100.52,
                speed: 15.8,
                course: 270,
                type: 'Unknown',
                mmsi: 416001789
            },
            {
                id: '4',
                name: 'HTMS Naresuan',
                lat: 13.68,
                lon: 100.60,
                speed: 10.3,
                course: 45,
                type: 'Military',
                mmsi: 567000234
            }
        ];

        function initializeMap() {
            map = L.map('map').setView([13.75, 100.58], 11);

            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '¬© OpenStreetMap contributors'
            }).addTo(map);

            updateVesselMarkers();
        }

        function getVesselColor(type) {
            switch (type) {
                case 'Military': return '#ef4444';
                case 'Commercial': return '#22c55e';
                default: return '#eab308';
            }
        }

        function createVesselIcon(vessel) {
            return L.divIcon({
                className: 'custom-div-icon',
                html: `<div style="background-color: ${getVesselColor(vessel.type)}; width: 12px; height: 12px; border-radius: 50%; border: 2px solid white; box-shadow: 0 2px 4px rgba(0,0,0,0.3);"></div>`,
                iconSize: [12, 12],
                iconAnchor: [6, 6]
            });
        }

        function createPopupContent(vessel) {
            return `
                <div class="p-2 min-w-[200px]">
                    <h3 class="font-bold text-gray-800">${vessel.name}</h3>
                    <p class="text-sm text-gray-600">MMSI: ${vessel.mmsi}</p>
                    <p class="text-sm text-gray-600">Type: ${vessel.type}</p>
                    <p class="text-sm text-gray-600">Speed: ${vessel.speed} kn</p>
                    <p class="text-sm text-gray-600">Course: ${vessel.course}¬∞</p>
                    <p class="text-xs text-gray-500 mt-2">Last Update: ${new Date().toLocaleTimeString()}</p>
                </div>
            `;
        }

        function updateVesselMarkers() {
            vesselMarkers.forEach(marker => map.removeLayer(marker));
            vesselMarkers = [];

            vessels.forEach(vessel => {
                const marker = L.marker([vessel.lat, vessel.lon], {
                    icon: createVesselIcon(vessel)
                });
                
                marker.bindPopup(createPopupContent(vessel));
                marker.on('mouseover', function() {
                    this.openPopup();
                });
                
                marker.addTo(map);
                vesselMarkers.push(marker);
            });

            updateStats();
        }

        function updateStats() {
            document.getElementById('vesselCount').textContent = vessels.length;
            document.getElementById('militaryCount').textContent = vessels.filter(v => v.type === 'Military').length;
            document.getElementById('alertCount').textContent = Math.floor(Math.random() * 3) + 1;
        }

        function refreshData() {
            // Simulate vessel movement
            vessels.forEach(vessel => {
                vessel.lat += (Math.random() - 0.5) * 0.001;
                vessel.lon += (Math.random() - 0.5) * 0.001;
                vessel.speed = Math.max(0, vessel.speed + (Math.random() - 0.5) * 2);
                vessel.course = (vessel.course + (Math.random() - 0.5) * 10) % 360;
            });
            
            updateVesselMarkers();
            updateLastUpdate();
        }

        function updateLastUpdate() {
            document.getElementById('lastUpdate').textContent = new Date().toLocaleTimeString('en-US');
        }

        function toggleAutoRefresh() {
            autoRefresh = !autoRefresh;
            const btn = document.getElementById('autoRefreshBtn');
            btn.textContent = `Auto: ${autoRefresh ? 'ON' : 'OFF'}`;
            btn.className = `px-4 py-2 ${autoRefresh ? 'bg-green-600 hover:bg-green-700' : 'bg-gray-600 hover:bg-gray-700'} rounded text-white text-sm`;
            
            if (autoRefresh) {
                refreshInterval = setInterval(refreshData, 5000);
            } else {
                clearInterval(refreshInterval);
            }
        }

        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', function() {
            initializeMap();
            
            if (autoRefresh) {
                refreshInterval = setInterval(refreshData, 5000);
            }
        });
    </script>
</body>
</html>